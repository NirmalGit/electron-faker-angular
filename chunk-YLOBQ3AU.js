import{a as O}from"./chunk-X6MGKJEZ.js";import{a as N,b as A}from"./chunk-YR3SB5I4.js";import{Ca as M,Cc as I,D as f,Dc as D,Ea as P,G as _,Ga as g,I as y,J as h,Q as d,Ua as s,Va as l,Wc as S,Xc as R,Y as a,da as c,gb as u,ja as C,jc as x,lc as E,na as m,oa as p,pc as w,sa as v,ta as i,ua as n,va as b}from"./chunk-A7ZUIS7E.js";function V(r,t){if(r&1&&(i(0,"p",2),s(1),n()),r&2){let e=g();a(),l(e.message)}}var L=class r{diameter=50;color="primary";message;static \u0275fac=function(e){return new(e||r)};static \u0275cmp=c({type:r,selectors:[["app-loading-spinner"]],inputs:{diameter:"diameter",color:"color",message:"message"},decls:3,vars:3,consts:[[1,"loading-spinner-container"],[3,"diameter","color"],[1,"loading-message"]],template:function(e,o){e&1&&(i(0,"div",0),b(1,"mat-spinner",1),m(2,V,2,1,"p",2),n()),e&2&&(a(),v("diameter",o.diameter)("color",o.color),a(),p(o.message?2:-1))},dependencies:[A,N],styles:[".loading-spinner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;min-height:200px}.loading-message[_ngcontent-%COMP%]{margin-top:1rem;font-size:.9rem;color:#0009}"]})};function z(r,t){if(r&1){let e=M();i(0,"button",4),P("click",function(){y(e);let T=g();return h(T.onRetry())}),i(1,"mat-icon"),s(2,"refresh"),n(),s(3," Retry "),n()}}var F=class r{title="Error";message="An error occurred";showRetry=!0;retry=new C;onRetry(){this.retry.emit()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=c({type:r,selectors:[["app-error-message"]],inputs:{title:"title",message:"message",showRetry:"showRetry"},outputs:{retry:"retry"},decls:10,vars:3,consts:[[1,"error-card"],[1,"error-content"],[1,"error-icon"],["mat-raised-button","","color","primary"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,o){e&1&&(i(0,"mat-card",0)(1,"mat-card-content")(2,"div",1)(3,"mat-icon",2),s(4,"error_outline"),n(),i(5,"h3"),s(6),n(),i(7,"p"),s(8),n(),m(9,z,4,0,"button",3),n()()()),e&2&&(a(6),l(o.title),a(2),l(o.message),a(),p(o.showRetry?9:-1))},dependencies:[w,x,E,D,I,R,S],styles:[".error-card[_ngcontent-%COMP%]{margin:1rem;background-color:#ffebee}.error-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;padding:1rem}.error-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#d32f2f;margin-bottom:1rem}h3[_ngcontent-%COMP%]{margin:.5rem 0;color:#c62828}p[_ngcontent-%COMP%]{color:#b71c1c;margin-bottom:1rem}button[_ngcontent-%COMP%]{margin-top:.5rem}"]})};var k=class r{constructor(t){this.dataApi=t}_products=d([]);_selectedProduct=d(null);_loading=d(!1);_error=d(null);_categories=d([]);products=this._products.asReadonly();selectedProduct=this._selectedProduct.asReadonly();loading=this._loading.asReadonly();error=this._error.asReadonly();categories=this._categories.asReadonly();hasProducts=u(()=>this._products().length>0);productsCount=u(()=>this._products().length);loadProducts(){this._loading.set(!0),this._error.set(null),this.dataApi.getAllProducts().subscribe({next:t=>{this._products.set(t),this._loading.set(!1)},error:t=>{this._error.set("Failed to load products: "+t.message),this._loading.set(!1),console.error("Error loading products:",t)}})}loadProductById(t){this._loading.set(!0),this._error.set(null),this.dataApi.getProductById(t).subscribe({next:e=>{this._selectedProduct.set(e),this._loading.set(!1)},error:e=>{this._error.set("Failed to load product: "+e.message),this._loading.set(!1),console.error("Error loading product:",e)}})}loadCategories(){this.dataApi.getCategories().subscribe({next:t=>{this._categories.set(t)},error:t=>{console.error("Error loading categories:",t)}})}loadProductsByCategory(t){this._loading.set(!0),this._error.set(null),this.dataApi.getProductsByCategory(t).subscribe({next:e=>{this._products.set(e),this._loading.set(!1)},error:e=>{this._error.set("Failed to load products: "+e.message),this._loading.set(!1),console.error("Error loading products by category:",e)}})}filterProducts(t){let e=t.toLowerCase();return this._products().filter(o=>o.title.toLowerCase().includes(e)||o.description.toLowerCase().includes(e)||o.category.toLowerCase().includes(e))}clearSelectedProduct(){this._selectedProduct.set(null)}clearError(){this._error.set(null)}static \u0275fac=function(e){return new(e||r)(_(O))};static \u0275prov=f({token:r,factory:r.\u0275fac,providedIn:"root"})};export{L as a,F as b,k as c};
